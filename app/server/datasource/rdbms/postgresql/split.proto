syntax = "proto3";

import "google/protobuf/wrappers.proto";

package NYql.Connector.App.Server.DataSource.RDBMS.PostgreSQL;

option go_package = "github.com/ydb-platform/fq-connector-go/app/server/datasource/rdbms/postgresql/";

// TInt64Bounds represents the bounds that can be found for an `bigint`, `bigserial` column
// An open interval can be represented by omitting one of the bounds.
message TInt64Bounds {
    google.protobuf.Int64Value upper = 1;
    google.protobuf.Int64Value lower = 2;
};

// TSplitDescription represents the description of PostgreSQL's table split.
message TSplitDescription {
    // TSingle means that table will be read sequentially
    message TSingle {
    }

    // THistogramBounds describes the method of large table splitting.
    // based on the PostgreSQL's internal table stats.
    message THistogramBounds {
        string column_name = 1;

        oneof payload {
            TInt64Bounds int64_bounds = 2;
        }
    }

    oneof payload {
        TSingle single = 1;
        THistogramBounds histogram_bounds = 2;
    }
}
